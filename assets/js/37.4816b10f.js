(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{392:function(t,s,a){"use strict";a.r(s);var e=a(25),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"add-applications-to-mynode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-applications-to-mynode"}},[t._v("#")]),t._v(" Add applications to MyNode")]),t._v(" "),a("h2",{attrs:{id:"step-1-add-an-entry-in-application-info-json"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-1-add-an-entry-in-application-info-json"}},[t._v("#")]),t._v(" Step 1: Add an entry in "),a("code",[t._v("application_info.json")])]),t._v(" "),a("p",[t._v("Add an entry in "),a("code",[t._v("rootfs/standard/usr/share/mynode/application_info.json")])]),t._v(" "),a("p",[t._v("Possible fields are:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("Field")]),t._v(" "),a("th",[t._v("Datatype")]),t._v(" "),a("th",[t._v("Required?")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("name")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Y")])]),t._v(" "),a("tr",[a("td",[t._v("short_name")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("Y")])]),t._v(" "),a("tr",[a("td",[t._v("app_tile_button_text")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("app_tile_button_href")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("app_tile_default_status_text")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("app_tile_running_status_text")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("supports_testnet")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("can_uninstall")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("show_on_homepage")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("show_on_application_page")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("homepage_order")]),t._v(" "),a("td",[t._v("integer")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("can_enable_disable")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("can_reinstall")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("requires_lightning")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("requires_electrs")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("requires_docker_image_installation")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])]),t._v(" "),a("tr",[a("td",[t._v("is_premium")]),t._v(" "),a("td",[t._v("boolean")]),t._v(" "),a("td",[t._v("N")])])])]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ride the Lightning"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"short_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtl"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app_tile_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"RTL"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app_tile_default_status_text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Lightning Wallet"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"can_uninstall"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"show_on_homepage"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"requires_lightning"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"supports_testnet"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"homepage_order"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"step-2-add-icon-for-the-home-and-applications-page"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-2-add-icon-for-the-home-and-applications-page"}},[t._v("#")]),t._v(" Step 2: Add icon for the home and applications page")]),t._v(" "),a("p",[t._v("Add a PNG icon in "),a("code",[t._v("rootfs/standard/var/www/mynode/static/images")]),t._v(".")]),t._v(" "),a("p",[t._v("The name of the icon should be "),a("strong",[t._v("<short_name>.png")]),t._v(".")]),t._v(" "),a("center",[a("p",[a("img",{attrs:{src:"/images/add-app/app-tile.png",alt:"RTL app tile"}})])]),t._v(" "),a("h2",{attrs:{id:"step-3-add-an-entry-in-mynode-app-versions-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-3-add-an-entry-in-mynode-app-versions-sh"}},[t._v("#")]),t._v(" Step 3: Add an entry in "),a("code",[t._v("mynode_app_versions.sh")])]),t._v(" "),a("p",[t._v("Add an entry for your app like the example below:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_VERSION")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v0.11.2"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_VERSION_FILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/bitcoin/.mynode/rtl_version\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_LATEST_VERSION_FILE")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/bitcoin/.mynode/rtl_version_latest\n")])])]),a("p",[t._v("The version file should start with the "),a("strong",[t._v("<short_name>")]),t._v(" of the app.")]),t._v(" "),a("h2",{attrs:{id:"step-4-add-installation-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-4-add-installation-steps"}},[t._v("#")]),t._v(" Step 4: Add installation steps")]),t._v(" "),a("p",[t._v("Add the installation steps in "),a("code",[t._v("rootfs/standard/usr/bin/mynode_post_upgrade.sh")]),t._v(". This script upgrades the app if a new version is available or installs it if it is not installed already.")]),t._v(" "),a("p",[t._v("Note that")]),t._v(" "),a("ul",[a("li",[t._v("The "),a("code",[t._v("UPGRADE_URL")]),t._v(" is the URL of the source code which includes the "),a("code",[t._v("VERSION")]),t._v(" variable from "),a("code",[t._v("mynode_app_versions.sh")]),t._v(" mentioned above")]),t._v(" "),a("li",[t._v("Download and installation steps are executed by "),a("code",[t._v("bitcoin")]),t._v(" user")]),t._v(" "),a("li",[t._v("the app should be installed in "),a("code",[t._v("/opt/mynode/<short_name>")])])]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" should_install_app "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtl"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_UPGRADE_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://github.com/Ride-The-Lightning/RTL/archive/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION")]),t._v(".tar.gz\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_UPGRADE_ASC_URL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("https://github.com/Ride-The-Lightning/RTL/releases/download/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION")]),t._v(".tar.gz.asc\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CURRENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -f "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION_FILE")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("CURRENT")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" $RTL_VERSION_FILE"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$CURRENT")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /opt/mynode\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf RTL\n\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_UPGRADE_URL")]),t._v(" -O RTL.tar.gz\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#sudo -u bitcoin wget $RTL_UPGRADE_ASC_URL -O RTL.tar.gz.asc")]),t._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#gpg --verify RTL.tar.gz.asc RTL.tar.gz")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#if [ $? == 0 ]; then")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xvf RTL.tar.gz\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" RTL.tar.gz\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" RTL-* RTL\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" RTL\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("NG_CLI_ANALYTICS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("false "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --only"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("production\n\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_VERSION_FILE")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ERROR UPGRADING RTL - GPG FAILED"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),a("p",[a("strong",[t._v("DO NOT")]),t._v(" add the installation steps in "),a("code",[t._v("setup/setup_device.sh")]),t._v(" unless the app is designed to be installed by default (like Bitcoin, LND).")]),t._v(" "),a("h2",{attrs:{id:"step-5-add-steps-to-uninstall-reinstall-the-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-5-add-steps-to-uninstall-reinstall-the-app"}},[t._v("#")]),t._v(" Step 5: Add steps to uninstall/reinstall the app")]),t._v(" "),a("p",[t._v("Edit")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("rootfs/standard/usr/bin/mynode_uninstall_app.sh")]),t._v(" and")]),t._v(" "),a("li",[a("code",[t._v("rootfs/standard/usr/bin/mynode_reinstall_app.sh")])])]),t._v(" "),a("p",[t._v("to add customised steps to uninstall the app.")]),t._v(" "),a("p",[t._v("The uninstall script deletes the version and install marker file, whereas the reinstall script deletes only the version marker file and keeps the install marker file intact.")]),t._v(" "),a("p",[t._v("Example:")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$APP")]),t._v('"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rtl"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /opt/mynode/RTL\n")])])]),a("h2",{attrs:{id:"step-6-add-a-service-to-run-the-applications-in-background"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-6-add-a-service-to-run-the-applications-in-background"}},[t._v("#")]),t._v(" Step 6: Add a service to run the applications in background")]),t._v(" "),a("p",[t._v("Add service entry for systemctl which would start/restart/stop the app.")]),t._v(" "),a("p",[t._v("The service file should be named as "),a("strong",[t._v("<short_name>.service")]),t._v(".")]),t._v(" "),a("p",[t._v("Example")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# RTL service")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /etc/systemd/system/rtl.service")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Unit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("RTL\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Wants")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bitcoin.service\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("After")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bitcoin.service\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStartPre")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/bin/is_not_shutting_down.sh\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStartPre")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/bin/wait_on_lnd.sh\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WorkingDirectory")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/mynode/RTL\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ExecStart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/bin/node rtl\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("User")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bitcoin\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bitcoin\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("simple\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("TimeoutSec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Restart")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("always\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RestartSec")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("StandardOutput")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("syslog\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("StandardError")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("syslog\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("SyslogIdentifier")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("rtl\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Install"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("WantedBy")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("multi-user.target\n")])])]),a("h2",{attrs:{id:"optional-step-add-configurations-files"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optional-step-add-configurations-files"}},[t._v("#")]),t._v(" Optional step: Add configurations files")]),t._v(" "),a("p",[t._v("Add any configuration files in "),a("code",[t._v("/rootfs/standard/usr/share/mynode/")]),t._v(" folder and copy them over to the desired location during installation or startup")]),t._v(" "),a("h2",{attrs:{id:"optional-step-edit-startup-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#optional-step-edit-startup-script"}},[t._v("#")]),t._v(" Optional step: Edit startup script")]),t._v(" "),a("p",[t._v("All persistent files should be stored on the external drive at "),a("code",[t._v("/mnt/hdd/mynode/short_name")]),t._v(". Make sure the startup script located at "),a("code",[t._v("/rootfs/standard/usr/bin/mynode_startup.sh")]),t._v(" creates that folder. You can use symlinks from "),a("code",[t._v("/opt/mynode/short_name")]),t._v(" to "),a("code",[t._v("/mnt/hdd/mynode/short_name")]),t._v(" to store large files on the external drive.")]),t._v(" "),a("p",[t._v("The example below shows how the startup script checks for the config file and creates symlinks if it's missing either on external drive or the SD card.")]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# RTL config")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /opt/mynode/RTL\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /mnt/hdd/mynode/rtl\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R bitcoin:bitcoin /mnt/hdd/mynode/rtl\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R bitcoin:bitcoin /mnt/hdd/mynode/rtl_backup\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If local settings file is not a symlink, delete and setup symlink to HDD")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" -L /opt/mynode/RTL/RTL-Config.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -f /opt/mynode/RTL/RTL-Config.json\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" -u bitcoin "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /mnt/hdd/mynode/rtl/RTL-Config.json /opt/mynode/RTL/RTL-Config.json\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If config file on HDD does not exist, create it")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" -f /mnt/hdd/mynode/rtl/RTL-Config.json "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -f /usr/share/mynode/RTL-Config.json /mnt/hdd/mynode/rtl/RTL-Config.json\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Force update of RTL config file (increment to force new update)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RTL_CONFIG_UPDATE_NUM")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" -f /mnt/hdd/mynode/rtl/update_settings_"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_CONFIG_UPDATE_NUM")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" -f /usr/share/mynode/RTL-Config.json /mnt/hdd/mynode/rtl/RTL-Config.json\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),t._v(" /mnt/hdd/mynode/rtl/update_settings_"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$RTL_CONFIG_UPDATE_NUM")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Update RTL config file to use mynode pw")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" -f /home/bitcoin/.mynode/.hashedpw "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HASH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /home/bitcoin/.mynode/.hashedpw"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"s/'),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("multiPassHashed"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(":.*/"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("multiPassHashed"),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HASH")]),a("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(',/g"')]),t._v(" /mnt/hdd/mynode/rtl/RTL-Config.json\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n")])])]),a("h2",{attrs:{id:"tips"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" Tips:")]),t._v(" "),a("ul",[a("li",[t._v("Learn from installation scripts of existing apps")]),t._v(" "),a("li",[t._v("Write scripts which do not fail unless they really need to")])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);